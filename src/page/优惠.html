<!DOCTYPE html>
<html lang="cn">

<head>
    <meta charset="UTF-8">
    <title>HUI买</title>
    <meta name="hotcss" content="initial-dpr=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" />
    <title>HUI买</title>
    <link rel="stylesheet" type="text/css" href="../css/sale20170309hq.css">
    <script type="text/javascript" src="../js/hotcss.js"></script>
   
</head>

<body >
     <div class="top">
    <div class="top-wrap">
        <a onclick="window.history.back()" href="javascript:void(0)" class="icon-left"></a>
        <h1>优惠</h1>
        <a href="#" class="icon-yh-wd">我的优惠</a>
    </div>
     </div>
     <div class="yh-tabs ">
     <!-- yh-tabs-two -->
         <ul>
             <li ><a href="javascript:;">活动</a></li>
             <li ><a href="javascript:;">附近</a></li>
             <li class="curr"><a href="javascript:;">领券</a></li>
         </ul>
     </div>
     <!--活动-->
     <div class="js_yh_tab_cons" style="display: none;">
               @@include('../component/shop-layout-1/index.html')
               @@include('../component/shop-layout-1and1/index.html')
              @@include('../component/shop-layout-1and3/index.html')
              @@include('../component/shop-layout-2and2/index.html')
              
            
     </div>
       <!--附近-->
      <div class="js_yh_tab_cons" style="display: none;">
         <div class="sub-tabs">
             <ul>
             <li class="curr"> <a href="#">综合</a></li>
             <li> <a href="#">人气</a></li>
             <li> <a href="#">最近</a></li>
             <li> <a href="#" class="map-icon">地图</a></li>
             </ul>
         </div>
         <div class="js_sub-tab-cons">
        
             <div id="wrapper" class="wd-wrapper">
                <div id="scroller">

            <div id="pullDown"> <span class="pullDownLabel">下拉刷新...</span> </div> 
       <!-- 综合 -->
         <div class="sub-tabs-con">
               <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>
              <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>
             <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>
             <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>
             <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>
             <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>
            
              <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>

         </div>
         <!-- 人气 -->
          <div class="sub-tabs-con" style="display: none;">
               <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>
         </div>
          <!-- 最近 -->
               <div class="sub-tabs-con" style="display: none;">
               <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>
             <a  href="#" class="wd-ewm-dp yh-fj">
               <div class="wd-ewm-dp-con">
                    <div class="wd-yydp-img"><img src="../images/sale/sale-img02.png" alt=""></div> 
                    <div class="wd-yydp-con">
                        <h4>XXXXXX店铺<span class="fr addr-dp">距您500m</span></h4>
                        <p><span>销量：5W+</span><span class="mgl-10">收藏：3000</span></p>
                        <p>地址：店铺店铺店铺店铺店铺店铺店铺店铺</p>
                    </div>  
               </div>
                 <div class="yh-fj-bottom"><span>送</span>送券1000元购千元机</div>
            </a>
         </div>
          <!-- 地图 -->
            <div class="sub-tabs-con" style="display: none;">
              <div id="allmap" ></div>
             
         </div>
           <div id="pullUp"> <span class="pullUpLabel">上拉加载更多...</span> </div>
       </div>
     </div>



       </div>

      </div>
    <!--领券-->
     <div class="js_yh_tab_cons">
         <div class="yh-card">
          <a href="#" class="yh-card-l"><img src="../images/sale/sale-img02.png"></a>
          <a  href="#" class="yh-card-m"><h4>线上订单使用券名称</h4><p class="yh-card-p"><span>50</span>限千元机使用</p></a>
          <div class="yh-card-r">
            <div class="myCanvas"><div class="myCanvas-div"><canvas id="myCanvas" width="100px" height="100" ></canvas></div></div>
            <div class="pos-rel">
             <p class="yh-card-r-p"><span>已抢</span><br>66%</p>
            <a href="#" class="yh-card-r-btn">立即领取</a>
            </div>
              
          </div>
     </div>

     <div class="yh-card yh-card-red">
          <a href="#" class="yh-card-l"><img src="../images/sale/sale-img02.png"></a>
          <div class="yh-card-jb">&nbsp;&nbsp;每日10点限时开抢</div>
          <a href="#"  class="yh-card-m"><h4>线上办理券名称</h4><p class="yh-card-p"><span>50</span>充值满200元可用</p></a>
           <div  class="yh-card-r">
          <div class="djs">
             <p>距离开抢还剩</p>
              <div class="djs-con"  id="fnTimeCountDown" >
                  <span class="hour">12</span>:<span class="mini">35</span>:<span class="sec">46</span>
              </div>
              <p><span>233333</span>人已提醒</p>
          </div>
           
            <a href="#" class="yh-card-r-btn js_lilq">提醒我</a>
          </div>
     </div>
      <div class="yh-card yh-card-red">
           <a href="#"  class="yh-card-l"><img src="../images/sale/sale-img02.png"></a>
          <a href="#"  class="yh-card-m"><h4>线下记录核销券名称中国移动公司</h4><p class="yh-card-p"><span>50</span>充值满200元可用</p></a>
          <div  class="yh-card-r">
            <div class="yh-card-yz"><span>已领取</span></div>
           
            <a href="#" class="yh-card-r-btn">去领取</a>
          </div>
     </div>
     <div class="yh-card yh-card-qw">
           <a href="#" class="yh-card-l"><img src="../images/sale/sale-xxhx-b.png"></a>
           <a href="#"  class="yh-card-m"><h4>线下办理核销券名称</h4><p class="yh-card-p"><span>免费</span>限指定店铺</p></a>
           <a href="#"  class="yh-card-r">
          </a>
     </div>
     </div>
    <!-- 三秒弹框-->
    <div class="dialog-three-s" id="dialog-three-s">
         <div class=""><img src="../images/true.png" alt=""></div>
          <!-- <div class=""><img src="../images/false.png" alt=""></div> -->
         <h4>提醒已设置</h4>
         <p>将在领券钱5分钟提醒您!</p>
    </div>
</body>
  <script type="text/javascript" src="../js/jquery-2.1.4.min.js"></script>
  <script type="text/javascript" src="../js/djs.js"></script>
  <script type="text/javascript" src="../js/iscroll.js"></script> 
  <script type="text/javascript">
  //扇形
     CanvasRenderingContext2D.prototype.sector = function(x,y,r,angle1,angle2){
            this.save();
            this.beginPath();
            this.moveTo(x,y);
            this.arc(x,y,r,angle1*Math.PI/180,angle2*Math.PI/180,false);
            this.closePath();    
            this.restore();
            return this;
        }
       var canvas = document.getElementById("myCanvas");
       var ctx = canvas.getContext("2d"); 
        ctx.fillStyle = '#628ea8';
        ctx.sector(50,50,45,0,270).fill();
        ctx.fillStyle = '#fff';
        ctx.sector(50,50,45,0,230).fill();
        ctx.fillStyle = '#8dcbf1';
        ctx.sector(50,50,37,0,360).fill();
   //倒计时
    $("#fnTimeCountDown").fnTimeCountDown("2018/03/23 14:38:00");
  //tab 切换
  $(function(){
      $(".yh-tabs li").click(function(){
      var currIndex = $(this).index();
      $(".yh-tabs li").removeClass("curr");
      $(this).addClass("curr");
      $(".js_yh_tab_cons").hide();
      $(".js_yh_tab_cons").siblings(".js_yh_tab_cons").eq(currIndex).show();
   });
      //三秒
      $(".js_lilq").click(function(){
        $("#dialog-three-s").fadeIn(100).delay (1000).fadeOut (1000);
      });
      //sub-tabs
      $(".sub-tabs li").click(function(){
      var currIndex1 = $(this).index();
      $(".sub-tabs li").removeClass("curr");
      $(this).addClass("curr");
      $(".sub-tabs-con").hide();
      $(".sub-tabs-con").siblings(".sub-tabs-con").eq(currIndex1).show();
   });
  })


  </script>
  <script type="text/javascript">
var myScroll,
  pullDownEl, pullDownOffset,
  pullUpEl, pullUpOffset,
  generatedCount = 0;

/**
 * 下拉刷新 （自定义实现此方法）
 * myScroll.refresh();    // 数据加载完成后，调用界面更新方法
 */
function pullDownAction () {
  setTimeout(function () {  // <-- Simulate network congestion, remove setTimeout from production!
    var el, li, i;
    el = document.getElementById('thelist');

    for (i=0; i<3; i++) {
      li = document.createElement('li');
      li.innerText = 'Generated row ' + (++generatedCount);
      el.insertBefore(li, el.childNodes[0]);
    }
    
    myScroll.refresh();   //数据加载完成后，调用界面更新方法   Remember to refresh when contents are loaded (ie: on ajax completion)
  }, 1000); // <-- Simulate network congestion, remove setTimeout from production!
}

/**
 * 滚动翻页 （自定义实现此方法）
 * myScroll.refresh();    // 数据加载完成后，调用界面更新方法
 */
function pullUpAction () {
  setTimeout(function () {  // <-- Simulate network congestion, remove setTimeout from production!
    var el, li, i;
    el = document.getElementById('thelist');

    for (i=0; i<3; i++) {
      li = document.createElement('li');
      li.innerText = 'Generated row ' + (++generatedCount);
      el.appendChild(li, el.childNodes[0]);
    }
    
    myScroll.refresh();   // 数据加载完成后，调用界面更新方法 Remember to refresh when contents are loaded (ie: on ajax completion)
  }, 1000); // <-- Simulate network congestion, remove setTimeout from production!
}

/**
 * 初始化iScroll控件
 */
function loaded() {
  pullDownEl = document.getElementById('pullDown');
  pullDownOffset = pullDownEl.offsetHeight;
  pullUpEl = document.getElementById('pullUp'); 
  pullUpOffset = pullUpEl.offsetHeight;
  
  myScroll = new iScroll('wrapper', {
    scrollbarClass: 'myScrollbar', /* 重要样式 */
    useTransition: false, /* 此属性不知用意，本人从true改为false */
    topOffset: pullDownOffset,
    onRefresh: function () {
      if (pullDownEl.className.match('loading')) {
        pullDownEl.className = '';
        pullDownEl.querySelector('.pullDownLabel').innerHTML = '下拉刷新...';
      } else if (pullUpEl.className.match('loading')) {
        pullUpEl.className = '';
        pullUpEl.querySelector('.pullUpLabel').innerHTML = '上拉加载更多...';
      }
    },
    onScrollMove: function () {
      if (this.y > 5 && !pullDownEl.className.match('flip')) {
        pullDownEl.className = 'flip';
        pullDownEl.querySelector('.pullDownLabel').innerHTML = '松手开始更新...';
        this.minScrollY = 0;
      } else if (this.y < 5 && pullDownEl.className.match('flip')) {
        pullDownEl.className = '';
        pullDownEl.querySelector('.pullDownLabel').innerHTML = '下拉刷新...';
        this.minScrollY = -pullDownOffset;
      } else if (this.y < (this.maxScrollY - 5) && !pullUpEl.className.match('flip')) {
        pullUpEl.className = 'flip';
        pullUpEl.querySelector('.pullUpLabel').innerHTML = '松手开始更新...';
        this.maxScrollY = this.maxScrollY;
      } else if (this.y > (this.maxScrollY + 5) && pullUpEl.className.match('flip')) {
        pullUpEl.className = '';
        pullUpEl.querySelector('.pullUpLabel').innerHTML = '上拉加载更多...';
        this.maxScrollY = pullUpOffset;
      }
    },
    onScrollEnd: function () {
      if (pullDownEl.className.match('flip')) {
        pullDownEl.className = 'loading';
        pullDownEl.querySelector('.pullDownLabel').innerHTML = '加载中...';        
        pullDownAction(); // Execute custom function (ajax call?)
      } else if (pullUpEl.className.match('flip')) {
        pullUpEl.className = 'loading';
        pullUpEl.querySelector('.pullUpLabel').innerHTML = '加载中...';        
        pullUpAction(); // Execute custom function (ajax call?)
      }
    }
  });
  
  setTimeout(function () { document.getElementById('wrapper').style.left = '0'; }, 800);
}

//初始化绑定iScroll控件 
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', loaded, false); 
</script>

</html>

